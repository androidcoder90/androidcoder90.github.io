---
layout:     post
title:    git note 
category: blog
description: Abstract of git commmands.
---

# Preface

Abstract of git commmands.

# Config

## ConfigFile
1. /etc/gitconfig #git config --system
2. ~/.gitconfig 	#git config --global
3. working/.git/config	#git config

## Custom
	## User
	git config --global user.name 'hilojack'
	git config --global user.email	a132811@gmail.com

	## Core.Editor
	git config --global core.editor vim

	## Merge
	git config --global merge.tool vimdiff

>> ps: U can set it to be your love tool,such as kdiff3,tkdiff,meld,xxdiff,emerge,gvimdiff,opendiff,etc..

	## config Command
	git config --list #list configration
	git config user.name #query a item

	## set color
	git config --global color.diff auto # git diff 要顯示顏色
	git config --global color.status auto # git status 要顯示顏色
	git config --global color.branch auto

## Help
	git help config
	man git-config

# Repository
## init
	git init //create .git
	git init --bare // create bare repository
## clone repository
	git clone url //=== git init +git fetch

# file status convert
There are 4 file statuses.

	untracked->	modified->	stage->	commited
## stage status
### add stage(working to stage)
	
	git add <file> //stage file(Untracked file is also included )
	#ignore
	$cat .gitignore //ignore When stage file
		*.tmp
		!a.tmp #do not ignore a.tmp
		*~
		.svn/ #ignore dir	
		*.[oa] or *.o & *.a
		/TODO #just ignore /TODO

		
### unstage(move stage to working)
	git reset HEAD  <file> //unstage  file
## rm
	#(rm file from working & staged)
	git rm <file> //rm file from working&stage
	#(rm file from staged)
	git rm --cached <file> //rm file from working&stage
	#rm file recurse
	git rm log/\*~  //recurse
## rename
It works for Stage && Working Copy
	git mv fileA fileB //same as: mv fileA fileB; git rm fileA;git add fileB
	
## commit(stage to commited)	
	git commit -m 'comment' //commited file
	#auto stage when commit
	git commit -a -m 'auto stage(except untracked file) '

# diff
## diff object
	## diff working & staged
	git diff

	## diff staged & commit
	#diff between staged file and commited file
	git diff --staged // same as : git diff --cached

	## diff working & commit
	git diff HEAD
	git diff HEAD ./lib # diff sub-dir between working & HEAD 
	git diff branch1

	## diff 2 branch
	git diff master..branch1 #diff 2 branch
	git diff master...branch1 #diff between The Parent of master|branch1  and branch1

## diff option
	#--stat just print statistic
	git diff master..branch1 --stat
	#check white space at the end of line
	git diff --check

# log
	#commit log
	git log
## sepecify branch
	git log [repo/]branch
	git log ^banch1 branch2 #List commit that is not in branch1 but in branch2
## list merges
	git log --merges
	git log --no-merges
## limit
	#last 2 comit log
	git log -2
### --since(--after)
	--since=2.weeks
	--since='2 years ago'
### other
	--since, --after
	--until, --before
	--auther='hilojack'
	--committer
	--no-merges
	--all-match 
##	diff info 
	#'-p' general diff patch
	git log -p -2
	#'--stat' general diffstat
	git log --stat -2

## format(--format)
	--format=oneline|short|full|fuller
	--format="%h - %an,$ar"
		%H commit hash
		%h abbreviation commit hash
		%T tree hash
		%t abbreviated tree hash
		%P parent hash
		%p abbreviated parent hash
		%an author name
		%ae author email
		%ad author date
		%ar author date(relative)
		%cn committer name(relative)
		%s subject 
### other
	--shortstat
	--name-only
	--name-status //file list
	--abbrev-commit
	--relative-date
	--graph //brach log info
	--pretty //same as --format
# recovery
## modify revision
	git add a.c;git commit --amend
## unstage
	git reset HEAD file
## revert working 
	git checkout -- file

# remote
## add/rm/rename
	git remote add shortname url
	git remote rm shortname 
	git remote rename shortnameA shortnameB

## show remote 
	git remote -v
	git remote show <remote-name> //origin

#	tag
	git tag
	git tag -1 'v1.*'
## add tag
	#add annotated tag
	git tag -a v1.4 -m 'fix bug'
	#add lighted tag
	git tag v1.4
	#add -s (-signed) tag
	git tag -s v1.4 -m 'fix'
	#add tag for a revision 
	git tag -a v1.5 9fceb	//revision 9fceb
## push tag
	# push a tag
	git push origin <tagname>
	# push all tag
	git push origin --tags

# Tips
## alias
	git config --global alias.ci commit
	git config --global alias.unstage 'reset HEAD'
## bash-complete
	sourte ~/.git-completion.bash //https://github.com/git/git/blob/master/contrib/completion/git-completion.bash

# branch
## list branch
	git branch
	git branch -v #more detail
## add/del branch
	git branch <branchName>
	git branch -d <branchName>
	git branch -D <branchName> //Force Del

## switch branch
	git checkout <branch>
## switch & add
	git checkout -b <branch>
	git checkout -b test origin/test //tracking branch
	git checkout --track origin/test //tracking branch
## branch info
	git branch -v

## merge
	git merge <branch>
	git merge test
	git merge origin/test
	git merge origin
	git pull //auto fetch the newest vertion of remote branch
### solove conflicts
	git config --global diff.tool diffmerge
	git config --global difftool.diffmerge.cmd 'diffmerge "$LOCAL" "$REMOTE"'
	git config --global merge.tool diffmerge
	git config --global mergetool.diffmerge.cmd 'diffmerge --merge --result="$MERGED" "$LOCAL" "$(if test -f "$BASE"; then echo "$BASE"; else echo "$LOCAL"; fi)" "$REMOTE"'
	git config --global mergetool.diffmerge.trustExitCode true
	git mergetool
### merge status
	git branch --merged 
	git branch --no-merged //the branch not merged

## fetch
	git fetch <repo>[:<branch>]

## push
	git push <repo> <local_branch>[:remote_branch]
	git push origin master:test
### del remote branch
	git push origin :test 

## rebase branch
	git rebase master //check current branch(from parent with current),rebase on master
	git rebase --onto=master branchA branchB //check branchB(keep commits from branchA),rebase on master.


