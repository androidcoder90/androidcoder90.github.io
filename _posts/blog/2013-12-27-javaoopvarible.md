---
layout:     post
title:   黑马程序员_java面向对象之变量
category: blog
description: 转:http://www.blogjava.net/fancydeepin 
---

#1java 中的变量大致分为 成员变量 和 局部变量 两大类

##1.1成员变量：
    在类体里面定义的变量称为成员变量；
    如果该成员变量有 static 关键字修饰，则该成员变量称为 静态变量 或 类变量；
    如果该成员变量没有 static 关键字修饰，则该成员变量被称为 非静态变量 或 实例变量。

##1.2局部变量：
    形参、方法内定义的变量、代码块中定义的变量，都属于局部变量。

###1.1.1类变量 （静态变量）
      可以向前引用
     变量属于类本身
     类变量不依赖类的实例，类变量只在初始化时候在栈内存中被分配一次空间，无论类的实例被创建几次，都不再为类变量分配空间
     通过类的任意一个实例来访问类变量，底层都将将其转为通过类本身来访问类变量，它们的效果是一样的
     一旦类变量的值被改变，通过类或类的任意一个实例来访问类变量，得到的都将是被改变后的值
     将在类的初始化之前初始化

###1.1.2实例变量（非静态变量）
     不能向前引用，如果向前引用，则称为非法向前引用，这是不允许的
     变量属于类的实例对象
     随着类的实例被创建而分配内存空间

###1.1.3非静态代码块
    直接由 { } 包起来的代码，称为非静态代码块

###1.1.4静态代码块
    直接由 static { } 包起来的代码，称为静态代码块

##1.3类变量（静态变量）、实例变量（非静态变量）、静态代码块、非静态代码块 的初始化时机
    由 static 关键字修饰的（如：类变量[静态变量]、静态代码块）将在类被初始化创建实例对象之前被初始化，而且是按顺序从上到下依次被执行；
    没有 static 关键字修饰的（如：实例变量[非静态变量]、非静态代码块）初始化实际上是会被提取到类的构造器中被执行的，但是会比类构造器中的
    代码块优先执行到，其也是按顺序从上到下依次被执行。

- 以上是本人在翻完 PDF 后的个人笔记和理解以及见解，不见得百分百对，以下附上本人测试示例代码，会更有说服性

###示例代码

     
     /**
      * -----------------------------------------
      * @文件: Statical.java
      * @作者: fancy
      * @邮箱: fancydeepin@yeah.net
      * @时间: 2012-7-9
      * @描述: TEST
      * -----------------------------------------
     */
     public class Statical {
    
     /**
         * 静态代码块
         * 类变量(静态变量)可以向前引用(即：先引用,再定义)
        */
        static {
            name = "fancydeepin"; // name 的定义在使用之后
            System.out.println("--->  静态代码块被执行   <---");
        }
     /**
         * 类变量(静态变量)在类的初始化之前初始化,无论类的实例将被创建多少个
         * 类变量(静态变量)都将只在初始化时候在栈内存上分配一次空间
         * 凡 static 修饰的,都将按位置被顺序执行，所以，
         * name 的值最终输出 fancy 而不是上面的 fancydeepin
         */
        public static String name = "fancy"; //类变量(静态变量)
        private String mail = "myEmail"; //实例变量(非静态变量)，定义时指定初始值，会比在构造器赋予值更早执行
        
        public Statical() {
            mail = "fancydeepin@yeah.net";
            System.out.println("---> 构造器代码块被执行 <---");
        }
     /**
         * 非静态代码块
         * 实际上，非静态代码块在类初始化创建实例时，将会被提取到类的构造器中，
         * 但是，非静态代码块会比构造器中的代码块优先被执行
         * 所以，mail 最终输出的是类构造器中给定的值，也就是 fancydeepin@yeah.net
         * 而不是 1525336367@qq.com，更不是 myEmail
         */
        {
            mail = "1525336367@qq.com";
            System.out.println("---> 非静态代码块被执行 <---");
        }
        
        // getting and setting 
     
###测试类示例代码

      /**
         * 类变量(静态变量)在类被初始化创建实例之前被初始化
         */
        System.out.println("-----------------> @1 <----------------");
        System.out.println("name --->> " + Statical.name); // @1
        System.out.println("-----------------> @1 <----------------");
       /**
         * 创建类的实例对象
         */
        System.out.println("-----------------> @6 <----------------");
        Statical statical = new Statical(); // @6
        System.out.println("-----------------> @6 <----------------");
        /**
         * 通过实例来访问类变量,底层将转化成通过类本身来访问类变量
         */
        System.out.println("-----------------> @2 <----------------");
        System.out.println("name --->> " + statical.name); // @2
        System.out.println("-----------------> @2 <----------------");
       /**
         * 如果类变量的值被改变,再访问类变量,将得到被改变后的值
         */
        Statical.name = "fancydeepin";
        
        System.out.println("-----------------> @3 <----------------");
        System.out.println("name --->> " + statical.name); // @3
        System.out.println("-----------------> @3 <----------------");
        
        System.out.println("-----------------> @4 <----------------");
        System.out.println("name --->> " + Statical.name); // @4
        System.out.println("-----------------> @4 <----------------");
       /**
         * 非静态代码块 和 构造器 被执行的时机
         */
        System.out.println("-----------------> @5 <----------------");
        System.out.println("mail --->> " + statical.getMail()); // @5
        System.out.println("-----------------> @5 <----------------");
 

###后台输出结果


    -----------------> @1 <----------------
    --->  静态代码块被执行   <---
    name --->> fancy
    -----------------> @1 <----------------
    
    -----------------> @6 <----------------
    ---> 非静态代码块被执行 <---
    ---> 构造器代码块被执行 <---
    -----------------> @6 <----------------
    
    -----------------> @2 <----------------
    name --->> fancy
    -----------------> @2 <----------------
    
    -----------------> @3 <----------------
    name --->> fancydeepin
    -----------------> @3 <----------------
    
    -----------------> @4 <----------------
    name --->> fancydeepin
    -----------------> @4 <----------------
    
    -----------------> @5 <----------------
    mail  --->> fancydeepin@yeah.net
    -----------------> @5 <----------------
    



#####为了能更好的看出后台的输出是哪一行代码执行的结果，我用了 @和数字来做了标记，希望大家不要看晕了哈 ^_^
#####最后针对输出结果简单说一下：
#####@1 说明，静态（类变量、静态代码块）属于类本身，不依赖于类的实例
#####@6 说明，在创建类的实例对象的时候，非静态代码块比构造器代码块更早的执行
#####@3 4 说明，当类变量的值改变后，再通过类或类的实例来访问类变量，得到的将是被改变后的值
#####@5 说明，非静态（实例变量、非静态代码块）的地位是相等的，它们将按顺序被执行，但会比构造器中的代码块更早的执行
